#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import DEVICE_TYPE kivymd.material_resources.DEVICE_TYPE

<PasswordFieldRec>:
    pwd_field: pwd
    #orientation: 'horizontal'
    size_hint_y: None
    height: pwd.height
    MDTextField:
        id: pwd
        hint_text: "Password"
        current_hint_text_color: [0,1,0,1]
        helper_text: "ffffff"
        helper_text_mode: "on_error"
        max_text_length: 36
        color_mode: "custom" #["primary", "accent", "custom"]
        mode: "rectangle" # ["rectangle", "fill"]
        line_color_normal:  [1,0,0,1]
        line_color_focus: [0,1,0,1]
        line_anim: True
        error_color: [1,0,0,1]
        fill_color: [0,0,0,.6]
        active_line: True
        icon_right_color: [0,0,1,1]
        text_color: [0,1,0,1]
        font_size: "18sp"
        focus: True

    MDIconButton:
        icon: "eye-off"
        ripple_scale: .5
        pos_hint: {"center_y": .5}
        pos: pwd.width - self.width + dp(8), 0
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            pwd.password = False if pwd.password is True else True

<PasswordFieldRound>
    size_hint_y: None
    height: pwd_text_field.height

    MDTextFieldRound:
        id: pwd_text_field
        hint_text: root.hint_text
        text: root.text
        password: True
        normal_color: app.theme_cls.accent_color
        color_active: get_color_from_hex("#F1E9C6")
        icon_left: "key-variant"
        padding:
            self._lbl_icon_left.texture_size[1] + dp(10) if self.icon_left else dp(15), (self.height / 2) - (self.line_height / 2), self._lbl_icon_right.texture_size[1] + dp(20), 0

    MDIconButton:
        icon: "eye-off"
        ripple_scale: .5
        pos_hint: {"center_y": .5}
        pos: pwd_text_field.width - self.width + dp(8), 0
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            pwd_text_field.password = False if pwd_text_field.password is True else True

<ItemBill>
    adaptive_height: True
    spacing: "8dp"
    padding: "8dp", "8dp", "8dp", "8dp"
    size_hint_y: None
    height: dp(52)
    MDGridLayout:
        adaptive_height: True
        md_bg_color: app.theme_manager.dark_color
        cols: 4

        AnchorLayout:
            anchor_x: "left"
            MDLabel:
                id: lbl_item
                text: root.item_name
                #shorten: True
                adaptive_size: True
                pos_hint: {"center_y": .5}
                halign: "center"
                font_style: "Caption"
                color:
                    (1, 1, 1, 1) \
                    if root.theme_cls.theme_style == "Dark" else \
                    (0, 0, 0, 1)

        #Widget:
        #    size_hint_x: None
        #    width: "32dp" if DEVICE_TYPE != "mobile" else "8dp"
        MDBoxLayout:
            orientation: 'horizontal'
            MDIconButton:
                id: btn_minus
                icon: "minus-circle-outline"
                user_font_size: "20sp" if DEVICE_TYPE != "mobile" else "16dp"
                ripple_scale: .5 if DEVICE_TYPE == "mobile" else 1
                pos_hint: {"center_y": .5}
                on_release: root.minus_item_count()


            MDLabel:
                id: lbl_count
                text: str(root.item_count)
                adaptive_size: True
                bold: True
                halign: "center"
                pos_hint: {"center_y": .5}
                font_style: "Caption"
                color:
                    (1, 1, 1, 1) \
                    if root.theme_cls.theme_style == "Dark" else \
                    (0, 0, 0, 1)
            MDIconButton:
                id: btn_plus
                icon: "plus-circle-outline"
                user_font_size: "20sp" if DEVICE_TYPE != "mobile" else "16dp"
                ripple_scale: .5 if DEVICE_TYPE == "mobile" else 1
                pos_hint: {'center_y': .5}
                md_bg_color_disabled: 0, 0, 0, 0
                on_release: root.plus_item_count()

        #Widget:
        #    size_hint_x: None
        #    width: "32dp" if DEVICE_TYPE != "mobile" else "8dp"

        MDLabel:
            id: lbl_price
            text: str(root.item_price)
            adaptive_size: True
            halign: "center"
            theme_text_color: "Custom"
            text_color: root.item_color
            pos_hint: {"center_y": .5}
            font_style: "H6"

        #Widget:
        #    size_hint_x: None
        #    width: "32dp" if DEVICE_TYPE != "mobile" else "8dp"
        AnchorLayout:
            anchor_x: "right"

            MDIconButton:
                id: btn_clear
                icon: "delete-outline"
                user_font_size: "20sp" if DEVICE_TYPE != "mobile" else "16dp"
                ripple_scale: .5 if DEVICE_TYPE == "mobile" else 1
                pos_hint: {'center_y': .5}
                md_bg_color_disabled: 0, 0, 0, 0
                on_press: print(root.parent.root)
                #on_release: root.parent.remove_item(root)
    
    #Widget:
    #    size_hint_x: None
    #    width: "32dp" if DEVICE_TYPE != "mobile" else "8dp"