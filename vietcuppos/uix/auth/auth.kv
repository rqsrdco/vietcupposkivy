#:import get_color_from_hex kivy.utils.get_color_from_hex


<ScaleBox>
    canvas.before:
        PushMatrix
        Scale:
            x: root.scale
            y: root.scale
            z: root.scale
            origin: self.center
    canvas.after:
        PopMatrix


<ForgetpPasswordBox>
    orientation: "vertical"
    adaptive_height: True
    spacing: "12dp"
    padding: "36dp", 0, "36dp", 0
    pos_hint: {"center_x": .5, "center_y": .5}

    MDLabel:
        text: "Place Your Email !"
        font_style: "H5"
        adaptive_size: True
        pos_hint: {"center_x": .5}

    Widget:
        size_hint_y: None
        height: "36dp"

    MDTextField:
        id: get_email_field
        hint_text: "Email Address ?"
        icon_left: 'email'
        icon_right: "account"
        helper_text: "example@gmail.com"
        helper_text_mode: "on_focus"
        #pos_hint: {"center_x":.5,"center_y":.5}
        #size_hint_x: None
        #width: 400
        font_size: 25
        line_color_normal:  [1,0,0,1]
        line_color_focus: [0,1,0,1]
        icon_right_color: [0,0,1,1]
        mode: "fill"
        fill_color: [0,0,0,.6]
        multiline: False
        focus: True

    #MDTextField:
    #    id: get_email_field
    #    hint_text: "Email Address ?"
    #    mode: "fill"
    #    color_mode: 'custom'
    #    text_color: get_color_from_hex("#FBD834")
    #    hint_text_color: get_color_from_hex("#E3BFA3")
    #    fill_color: get_color_from_hex("#E6C67C0f")
    #    line_color_focus: get_color_from_hex("#E3BFA3")
    #    line_color_normal: app.theme_cls.accent_color

    Widget:
        size_hint_y: None
        height: "36dp"

    MDIconButton:
        id: forgotpass_btn
        on_release: app.root.current = 'admin' #root.parent.parent.goto_admin()
        canvas:
            Color:
                rgba: get_color_from_hex("#2B2A29")
            Line:
                width: 1.2
                circle: (self.center_x, self.center_y, sp(52))

        icon: "key"
        user_font_size: "48sp"
        pos_hint: {"center_x": .5}
        md_bg_color: get_color_from_hex("#E6C67C")


<SignInBox>
    orientation: "vertical"
    adaptive_height: True
    spacing: "12dp"
    padding: "36dp", 0, "36dp", 0
    pos_hint: {"center_x": .5, "center_y": .5}

    MDLabel:
        text: "Sign In"
        font_style: "H5"
        adaptive_size: True
        pos_hint: {"center_x": .5}

    Widget:
        size_hint_y: None
        height: "36dp"

    MDTextFieldRound:
        id: email_field
        icon_left: 'email'
        focus: True
        multiline: False        
        hint_text: "Email address"
        helper_text: "Email not found"
        helper_text_mode: "on_error"
        icon_left: 'email'
        normal_color: app.theme_cls.accent_color
        color_active: get_color_from_hex("#F1E9C6")
        on_text_validate: pass_field.focus = True

    ClickableTextFieldRound:
        id: pass_field
        hint_text: "Password"

    Widget:
        size_hint_y: None
        height: "36dp"

    MDRoundFlatButton:
        id: signin_btn
        text: "Sign In"
        pos_hint: {"center_x": .5}
        line_width: 1.2
        on_press: app.root.current = 'cashier' #root.parent.parent.goto_cashier()


<LoginScreen>
    md_bg_color: get_color_from_hex("#2B2A29")    

    MDCard:
        id: box
        size_hint: .9, .9
        pos_hint: {"center_x": .5, "center_y": .5}
        radius: [12,]
        elevation: 18
        md_bg_color: get_color_from_hex("#2B2A29")

        ScaleBox:
            id: forgetpass_enabled_box
            orientation: "vertical"
            adaptive_height: True
            spacing: "32dp"
            pos_hint: {"center_x": .5, "center_y": .5}

            MDLabel:
                text: "Start your Session ?"
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#E3BFA3")
                opposite_colors: True
                font_style: "H5"
                adaptive_size: True
                pos_hint: {"center_x": .5}

            MDRoundFlatButton:
                id: enter_signin_btn
                text: "Sign In"
                pos_hint: {"center_x": .5}
                line_width: 1.2
                on_release: root.animation_to_left()

        ScaleBox:
            id: start_forgetpass_box
            orientation: "vertical"
            adaptive_height: True
            spacing: "32dp"
            pos_hint: {"center_x": .5, "center_y": .5}

            MDLabel:
                text: "Forgot your \nPassword ?"
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#E3BFA3")
                opposite_colors: True
                font_style: "H5"
                adaptive_size: True
                pos_hint: {"center_x": .5}

            MDRoundFlatButton:
                id: enter_get_pass_btn
                text: "Password Reset"
                pos_hint: {"center_x": .5}
                line_width: 1.2
                on_release: root.animation_to_right()

    MDCard:
        id: box2
        md_bg_color: get_color_from_hex("#382B2A")
        size_hint: None, None
        size: box.width / 2, box.height + dp(40)
        radius: [39,]
        elevation: 39
        x: box.x + dp(20) + root.card_x
        y: box.y - dp(20)

        SignInBox:
            id: signin_box

<ClickableTextFieldRound>:
    size_hint_y: None
    height: text_field.height

    MDTextFieldRound:
        id: text_field
        hint_text: root.hint_text
        text: root.text
        password: True
        multiline: False
        normal_color: app.theme_cls.accent_color
        color_active: get_color_from_hex("#F1E9C6")
        icon_left: "key-variant"
        padding:
            self._lbl_icon_left.texture_size[1] + dp(10) if self.icon_left else dp(15),                 (self.height / 2) - (self.line_height / 2),                 self._lbl_icon_right.texture_size[1] + dp(20),                 0

    MDIconButton:
        icon: "eye-off"
        ripple_scale: .5
        pos_hint: {"center_y": .5}
        pos: text_field.width - self.width + dp(8), 0
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            text_field.password = False if text_field.password is True else True